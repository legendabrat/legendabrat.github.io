<!DOCTYPE html>
<html lang="ru">
<head>
<meta charset="UTF-8">
<title>–ö—Ä—É—Ç–∏–º –±–∞—Ä–∞–±–∞–Ω</title>

<style>
body{
  margin:0;
  background:#111;
  color:white;
  font-family:Arial;
  display:flex;
  height:100vh;
}

/* –õ–µ–≤–∞—è –ø–∞–Ω–µ–ª—å */
.sidebar{
  width:250px;
  background:rgba(255,255,255,0.08);
  backdrop-filter:blur(6px);
  padding:20px;
  box-sizing:border-box;
}

.sidebar h2{
  margin-top:0;
}

.sidebar input{
  width:100%;
  padding:8px;
  margin-bottom:10px;
  font-size:14px;
}

.sidebar button{
  width:100%;
  padding:8px;
  margin-bottom:10px;
  cursor:pointer;
}

.nameList{
  margin-top:15px;
  font-size:14px;
}

.main{
  flex:1;
  display:flex;
  flex-direction:column;
  align-items:center;
  justify-content:center;
}

h1{
  margin-bottom:20px;
}

.container{
  position:relative;
}

.arrow{
  position:absolute;
  left:-40px;
  top:50%;
  transform:translateY(-50%) rotate(180deg);
  width:0;
  height:0;
  border-top:15px solid transparent;
  border-bottom:15px solid transparent;
  border-right:30px solid white;
}

canvas{
  border-radius:50%;
  border:8px solid #333;
}
</style>
</head>
<body>

<div class="sidebar">
  <h2>–ò–º–µ–Ω–∞</h2>
  <input type="text" id="nameInput" placeholder="–í–≤–µ–¥–∏—Ç–µ –∏–º—è">
  <button onclick="addName()">–î–æ–±–∞–≤–∏—Ç—å</button>
  <div class="nameList" id="nameList"></div>
</div>

<div class="main">
  <h1>üéØ –ö—Ä—É—Ç–∏–º –±–∞—Ä–∞–±–∞–Ω</h1>

  <div class="container">
    <div class="arrow"></div>
    <canvas id="wheel" width="400" height="400"></canvas>
  </div>

  <button style="margin-top:20px;padding:10px 20px;font-size:18px;" onclick="spin()">
    –ö—Ä—É—Ç–∏—Ç—å
  </button>
</div>

<script>
const canvas = document.getElementById("wheel");
const ctx = canvas.getContext("2d");

let names = ["–ò–≥—Ä–æ–∫ 1","–ò–≥—Ä–æ–∫ 2","–ò–≥—Ä–æ–∫ 3","–ò–≥—Ä–æ–∫ 4","–ò–≥—Ä–æ–∫ 5","–ò–≥—Ä–æ–∫ 6","–ò–≥—Ä–æ–∫ 7","–ò–≥—Ä–æ–∫ 8"];
const colors = ["#ff0000","#ffff00","#0000ff","#00ff00"];

let currentAngle = 0;
let spinning = false;

function updateList(){
  const list = document.getElementById("nameList");
  list.innerHTML="";
  names.forEach(n=>{
    list.innerHTML += n + "<br>";
  });
}

function drawWheel(){
  ctx.clearRect(0,0,400,400);
  const arc = 2*Math.PI / names.length;

  for(let i=0;i<names.length;i++){
    ctx.beginPath();
    ctx.fillStyle = colors[i % colors.length];
    ctx.moveTo(200,200);
    ctx.arc(200,200,200,arc*i,arc*(i+1));
    ctx.fill();

    ctx.save();
    ctx.translate(200,200);
    ctx.rotate(arc*i + arc/2);
    ctx.fillStyle="black";
    ctx.font="16px Arial";
    ctx.fillText(names[i],120,5);
    ctx.restore();
  }
}

function addName(){
  const input=document.getElementById("nameInput");
  if(input.value.trim()==="") return;
  names.push(input.value.trim());
  input.value="";
  updateList();
  drawWheel();
}

function spin(){
  if(spinning) return;
  spinning=true;

  let spinTime = 4000;
  let start = null;
  let startAngle = currentAngle;
  let extraRotation = 360*5 + Math.random()*360;

  function animate(timestamp){
    if(!start) start = timestamp;
    let progress = timestamp - start;
    let ease = 1 - Math.pow(1 - progress/spinTime, 3);

    currentAngle = startAngle + extraRotation * ease;
    canvas.style.transform = `rotate(${currentAngle}deg)`;

    if(progress < spinTime){
      requestAnimationFrame(animate);
    } else {
      spinning=false;
      showWinner();
    }
  }

  requestAnimationFrame(animate);
}

function showWinner(){
  const arc = 360 / names.length;
  let normalized = currentAngle % 360;
  let index = Math.floor((360 - normalized) / arc) % names.length;
  alert("–ü–æ–±–µ–¥–∏—Ç–µ–ª—å: " + names[index]);
}

updateList();
drawWheel();
</script>

</body>
</html>
